<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>The Lesser-Known Contributors Who Are Trying To Make PHP Good Again &#8211; Daniel Nill</title>
<meta name="description" content="">
<meta name="keywords" content="">
<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/">
<meta name="twitter:title" content="The Lesser-Known Contributors Who Are Trying To Make PHP Good Again">
<meta name="twitter:description" content="">
<meta name="twitter:creator" content="@DanielNill">
<link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Daniel Nill" />

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="The Lesser-Known Contributors Who Are Trying To Make PHP Good Again">
<meta property="og:description" content="">
<meta property="og:url" content="/the-lesser-known-contributors-who-are-trying-to-ma">
<meta property="og:site_name" content="Daniel Nill">





<link rel="canonical" href="/the-lesser-known-contributors-who-are-trying-to-ma">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Daniel Nill Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700|PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.min.css">

<!--[if (lt IE 9) & (!IEMobile)]>
<link rel="stylesheet" href="/assets/css/ie.min.css">
<![endif]-->

<meta http-equiv="cleartype" content="on">

</head>

<body class="page" itemscope itemtype="http://schema.org/WebPage">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="">Daniel Nill</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
		    <ul>
		        
				<li><a href="/" >Posts</a></li>
		        
				<li><a href="/about.html" >About</a></li>
		        
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->




<div id="main" role="main"  itemprop="mainContentOfPage">
  <div class="article-author-side">
    <!-- <img src="/images/profile-photo-new1.jpg" class="bio-photo" alt="Daniel Nill bio photo"></a> -->
<p></p>
<br/>
<a href="http://twitter.com/DanielNill" class="author-social" target="_blank"><i class="icon-twitter"></i> Twitter</a>


<a href="http://linkedin.com/in/danielnill" class="author-social" target="_blank"><i class="icon-linkedin"></i> LinkedIn</a>

<a href="http://github.com/DanielNill" class="author-social" target="_blank"><i class="icon-github"></i> Github</a>



  </div>
  <article itemscope itemtype="http://schema.org/CreativeWork">
    <h1 itemprop="name">The Lesser-Known Contributors Who Are Trying To Make PHP Good Again</h1>
    <div class="article-wrap" itemprop="text">
      <p>Php gets a log of hate, and a lot of that hate is <a href="http://php.net/manual/en/types.comparisons.php">not</a> <a href="http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/">without</a> <a href="http://www.codinghorror.com/blog/2012/06/the-php-singularity.html">merit</a>.  But I have recently started adopting some tools at work that make php development a lot more enjoyable, and thought I would share.</p>

<h4 id="1-composer">1) Composer:</h4>

<p>Composer is a pretty great package management system in the style of npm.  It provides package management at the project level by providing a autoloader that is compiled on package install.  This allows developers the ability to have multiple package versions installed on one machine and have them mapped to the projects they are specified for.</p>

<p>Furthermore, composer allows package maintainers a fresh start from the mess that is the Pear package manager.</p>

<p>A projects dependencies can be set up simply by including a composer.phar file and setting up a composer.json file like so:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="w">  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My-New-Project"</span><span class="p">,</span><span class="w">

    </span><span class="nl">"require-prod"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"doctrine/orm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.2.1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"require-dev"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"doctrine/orm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.*"</span><span class="w">

    </span><span class="nl">"require"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"facebook-sdk"</span><span class="p">:</span><span class="w"> </span><span class="s2">"master"</span><span class="w">
    </span><span class="p">},</span><span class="w">

    </span><span class="nl">"repositories"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"package"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"facebook-sdk"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"master"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://github.com/facebook/php-sdk.git"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"git"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"master"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">

  </span><span class="p">}</span></code></pre></figure>

<h4 id="2-phake">2) Phake:</h4>

<p>One of the major reasons that ruby and python have become tremendously popular over the past five to ten years is because they provide very easy paths to test drive and maintain high coverage of your code base.  The same cannot be said for PHP and its PhpUnit framework.</p>

<p>Phake is a mocking framework that aims to fix a lot of the problems that PhpUnit’s mocking framework introduces.</p>

<p>Simple mocking and stubbing in Phake has far less unnecessarily verbosity.  Where a mock in PhpUnit requires this:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">  <span class="cp">&lt;?php</span>
  <span class="nv">$mock</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">getMockBuilder</span><span class="p">(</span><span class="s1">'MyClass'</span><span class="p">)</span>
      <span class="o">-&gt;</span><span class="nf">disableOriginalConstructor</span><span class="p">()</span>
      <span class="o">-&gt;</span><span class="nf">setMethods</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'some_method'</span><span class="p">))</span>
      <span class="o">-&gt;</span><span class="nf">getMock</span><span class="p">();</span>

  <span class="nv">$mock</span><span class="o">-&gt;</span><span class="nf">expects</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">any</span><span class="p">())</span>
      <span class="o">-&gt;</span><span class="nf">method</span><span class="p">(</span><span class="s1">'some_method'</span><span class="p">)</span>
      <span class="o">-&gt;</span><span class="nf">with</span><span class="p">(</span><span class="s1">'some_value'</span><span class="p">)</span>
      <span class="o">-&gt;</span><span class="nf">will</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">returnValue</span><span class="p">(</span><span class="s1">'something'</span><span class="p">));</span>
  <span class="cp">?&gt;</span></code></pre></figure>

<p>Phake only requires this:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">  <span class="cp">&lt;?php</span>
  <span class="nv">$mock</span> <span class="o">=</span> <span class="nc">Phake</span><span class="o">::</span><span class="nf">mock</span><span class="p">(</span><span class="s1">'MyClass'</span><span class="p">);</span>
  <span class="nc">Phake</span><span class="o">::</span><span class="nf">when</span><span class="p">(</span><span class="nv">$mock</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">someMethod</span><span class="p">(</span><span class="s1">'expected value'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">thenReturn</span><span class="p">(</span><span class="s1">'something'</span><span class="p">);</span>
  <span class="cp">?&gt;</span></code></pre></figure>

<p>Additionally, Phake provides a more sane solution to running verifies.  In phpunit’s verify system you are required to state your verify before you state the code you’re testing.  This makes the test much harder to read.</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">  <span class="cp">&lt;?php</span>
  <span class="nv">$mock</span><span class="o">-&gt;</span><span class="nf">expects</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">any</span><span class="p">())</span>
    <span class="o">-&gt;</span><span class="nf">method</span><span class="p">(</span><span class="s1">'some_method'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">with</span><span class="p">(</span><span class="s1">'some_value'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">will</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">returnValue</span><span class="p">(</span><span class="s1">'something'</span><span class="p">));</span>

  <span class="nv">$tested_class</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TestedClass</span><span class="p">();</span>
  <span class="nv">$tested_class</span><span class="o">-&gt;</span><span class="nf">setMock</span><span class="p">(</span><span class="nv">$mock</span><span class="p">);</span>
  <span class="nv">$tested_class</span><span class="o">-&gt;</span><span class="nf">methodThatCallsMockedMethod</span><span class="p">(</span><span class="s1">'some_value'</span><span class="p">);</span>
  <span class="cp">?&gt;</span></code></pre></figure>

<p>In Phake you are able to verify after your mock is injected like so:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">  <span class="cp">&lt;?php</span>
  <span class="nv">$mock</span> <span class="o">=</span> <span class="nc">Phake</span><span class="o">::</span><span class="nf">mock</span><span class="p">(</span><span class="s1">'MyClass'</span><span class="p">);</span>
  <span class="nv">$mock</span><span class="o">-&gt;</span><span class="nf">someMethod</span><span class="p">(</span><span class="s1">'some_value'</span><span class="p">);</span>

  <span class="nv">$tested_class</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TestedClass</span><span class="p">();</span>
  <span class="nv">$tested_class</span><span class="o">-&gt;</span><span class="nf">setMock</span><span class="p">(</span><span class="nv">$mock</span><span class="p">);</span>

  <span class="c1">//verify after calling the code being tested.</span>
  <span class="nc">Phake</span><span class="o">::</span><span class="nf">verify</span><span class="p">(</span><span class="nv">$mock</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">someMethod</span><span class="p">(</span><span class="s1">'some_value'</span><span class="p">);</span>
  <span class="cp">?&gt;</span></code></pre></figure>

<h4 id="3-php-54-additions">3) Php 5.4 Additions:</h4>

<p>There are several additions that have been made to php in 5.4 that provide tools that I am use to having access to in other web development environments.  Namely, short syntax arrays, method chaining directly from an instantiated object and building a web server on the fly.  Try some of these commands out:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">  <span class="cp">&lt;?php</span>
  <span class="c1">//new array syntax</span>
  <span class="nv">$my_array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="s1">'a'</span><span class="p">,</span> <span class="mi">299</span><span class="p">,</span> <span class="s1">'hello'</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="s1">'world'</span><span class="p">];</span>

  <span class="c1">//chain off object instantiation</span>
  <span class="nv">$my_class</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MyClass</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">someMethod</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">someOtherMethod</span><span class="p">();</span>

  <span class="c1">//instantiate a webserver from the command line</span>
  <span class="n">php</span> <span class="o">-</span><span class="nc">S</span> <span class="n">localhost</span><span class="o">:</span><span class="mi">8000</span>

  <span class="c1">//instantiate a webserver with webroot defined</span>
  <span class="n">php</span> <span class="o">-</span><span class="nc">S</span> <span class="n">localhost</span><span class="o">:</span><span class="mi">8000</span> <span class="o">-</span><span class="n">t</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">your</span><span class="o">/</span><span class="n">files</span>
  <span class="cp">?&gt;</span></code></pre></figure>

<p>Php still has its faults and there is likely little that can be done to erase them.  But the developers of these new tools deserve some serious recognition for the work they are doing to move a language they love in the right direction.</p>


    </div><!-- /.article-wrap -->
  </article>
</div><!-- /#index -->

<div class="footer-wrap">
  <footer>
    <span>&copy; 2023 Daniel Nill.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-29127035-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

          

</body>
</html>
